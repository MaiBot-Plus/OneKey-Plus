# MaiBot-Plus 一键管理程序

## 📖 项目概述

MaiBot-Plus 一键管理程序是一个强大的Python管理工具，专为简化多服务机器人系统的部署、运行和维护而设计。该程序提供了友好的命令行界面，支持一键启动、更新和管理多个相关服务。

## ✨ 主要功能

### 🚀 服务管理
- **多服务启动**: 支持启动 MaiBot 主程序、Napcat Adapter、Matcha Adapter、Napcat 服务和 Matcha 程序
- **服务组合**: 提供预配置的服务组合，一键启动完整的机器人解决方案
  - QQ机器人组合：MaiBot + Napcat Adapter + Napcat服务
  - Matcha机器人组合：MaiBot + Matcha Adapter + Matcha程序
- **状态监控**: 实时查看所有服务的运行状态和进程信息
- **安全停止**: 一键安全停止所有正在运行的服务

### 🔄 版本控制与更新
- **GitHub集成**: 支持私有仓库的自动更新，使用安全的Token认证
- **智能更新**: 自动检测本地与远程仓库的差异，显示落后的commit信息
- **依赖管理**: 更新仓库后自动安装/更新相关依赖包
- **批量更新**: 支持一键更新所有关联仓库

### 🛠️ 系统维护
- **依赖安装**: 智能安装和更新所有服务的Python依赖包
- **权限修复**: 自动诊断和修复pip权限问题
- **系统信息**: 显示详细的系统和环境信息
- **仓库状态**: 检查各个仓库的commit状态和更新情况

## 🎯 支持的服务

| 服务名称 | 类型 | 描述 | 仓库地址 |
|---------|------|------|----------|
| MaiBot 主程序 | Python | AI聊天机器人核心程序 | MaiBot-Plus/MaiMbot-Pro-Max |
| Napcat Adapter | Python | QQ消息适配器 | MaiBot-Plus/Napcat-Adapter |
| Matcha Adapter | Python | Matcha消息适配器 | MaiBot-Plus/Matcha-Adapter |
| Napcat 服务 | Batch | QQ协议服务 | 本地服务 |
| Matcha 程序 | Executable | Matcha客户端程序 | 本地程序 |

## 📋 系统要求

- **操作系统**: Windows (支持PowerShell和CMD)
- **Python**: 3.7+ (建议使用虚拟环境)
- **Git**: 用于仓库管理和更新
- **网络**: 需要稳定的网络连接以进行仓库更新

## 🚀 快速开始

### 1. 环境准备
```bash
# 确保Python和Git已安装
python --version
git --version

# 创建虚拟环境（推荐）
python -m venv .venv
.venv\Scripts\activate
```

### 2. 运行程序
```bash
# 直接运行
python onekey.py

# 或使用批处理文件
启动一键包程序.bat
```

### 3. 首次使用
- 运行 `首次启动点我.bat` 进行初始化设置
- 选择菜单选项 13 安装所有依赖包
- 选择菜单选项 12 更新所有仓库到最新版本

## 📱 使用指南

### 主菜单功能

#### 快捷启动服务管理
- `1-5`: 启动单个服务
- `6`: 启动服务组合（QQ机器人组合/Matcha机器人组合）
- `7`: 查看所有服务运行状态
- `8`: 安全停止所有服务

#### 更新管理
- `9-11`: 更新单个仓库
- `12`: 批量更新所有仓库
- `15-17`: 检查仓库commit状态

#### 系统维护
- `13`: 安装/更新依赖包
- `14`: 查看系统信息
- `18`: 修复pip权限问题

### 服务组合说明

#### QQ机器人组合
适用于QQ平台的完整机器人解决方案：
- MaiBot主程序：提供AI对话能力
- Napcat Adapter：处理QQ消息协议转换
- Napcat服务：连接QQ客户端

#### Matcha机器人组合
适用于Matcha平台的完整机器人解决方案：
- MaiBot主程序：提供AI对话能力
- Matcha Adapter：处理Matcha消息协议转换
- Matcha程序：Matcha客户端连接

## 🔧 高级功能

### 自动更新机制
程序支持GitHub私有仓库的安全更新：
- 使用Token认证确保安全性
- 自动检测本地与远程差异
- 显示详细的commit更新信息
- 更新后自动安装新依赖

### 智能错误处理
- 多种pip安装方式自动尝试
- 权限问题自动诊断和修复建议
- 详细的错误信息和解决方案提示

### 进程管理
- 每个服务在独立窗口运行
- 支持后台服务监控
- 安全的进程启动和停止机制

## 🎨 界面特性

- **彩色输出**: 使用ANSI颜色增强可读性
- **清晰分类**: 功能按类型分组，便于查找
- **状态指示**: 实时显示服务运行状态
- **进度提示**: 详细的操作进度和结果反馈

## ⚠️ 注意事项

1. **权限要求**: 某些操作可能需要管理员权限
2. **网络依赖**: 仓库更新需要稳定的网络连接
3. **虚拟环境**: 强烈建议使用Python虚拟环境
4. **备份提醒**: 更新仓库前会覆盖本地修改，请注意备份

## 🐛 故障排除

### 常见问题

**Q: pip安装失败？**
A: 选择菜单选项18进行权限修复，或以管理员身份运行程序

**Q: 仓库更新失败？**
A: 检查网络连接和Git配置，确保有仓库访问权限

**Q: 服务启动失败？**
A: 检查对应服务的目录和文件是否存在，查看系统信息确认环境配置

**Q: 找不到虚拟环境？**
A: 确保在项目根目录下存在`.venv`文件夹，或手动创建虚拟环境

## 📄 许可证

本项目遵循相应的开源许可证，详见 [LICENSE](LICENSE) 文件。

## 👨‍💻 作者信息

- **编辑者**: 阿范 @212898630
- **项目版本**: 1.0
- **最后更新**: 2025年

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

---

*MaiBot-Plus 一键管理程序 - 让机器人部署变得简单高效* 🤖✨
